.\" Text automatically generated by txt2man
.TH rbh-lhsm 1 "04 August 2014" "" ""
.SH NAME
\fBrbh-lhsm \fP- policy engine and statistics tool for large file systems
.SH SYNOPSIS
.nf
.fam C
  \fBrbh-lhsm\fP [\fIoptions\fP]

.fam T
.fi
.fam T
.fi
.SH ACTIONS

.TP
.B
\fB-S\fP, \fB--scan\fP[=\fIdir\fP]
Scan the filesystem namespace. If \fIdir\fP is specified, only scan the specified subdir.
.TP
.B
\fB-r\fP, \fB--read-log\fP[=\fImdt_idx\fP]
Read events from MDT ChangeLog.
If \fImdt_idx\fP is specified, only read ChangeLogs for the given MDT.
Else, start 1 changelog reader thread per MDT (with DNE).
.TP
.B
\fB--run\fP[=policy1,policy2\.\.\.]
Run the given policies. If no policy is specified (or 'all'), run all policies.
.TP
.B
\fB-C\fP policy1,policy2\.\.\., \fB--check-thresholds\fP[=policy1,policy2\.\.\.]
Only check trigger thresholds without applying policy actions.
If no policy is specified (or 'all'), check all triggers.
.PP
Note: if no action is specified, the default action set is: \fB--read-log\fP \fB--run\fP=all
.SH POLICY RUN OPTIONS

.TP
.B
\fB-t\fP target, \fB--target\fP=target
Run the policies only on the specified target.
Target specification can be one of: fs (all entries), user:username, group:grpname, file:path, class:\fIfileclass\fP, ost:ost_idx, pool:poolname.
.TP
.B
\fB--usage-target\fP=percent
For FS, OST or pool targets of purge policies, specifies the target disk usage (in percent).
.TP
.B
\fB-I\fP, \fB--ignore-policies\fP
Apply policy to all entries in policy scope, without checking policy rules.
.TP
.B
\fB--no-limit\fP
Don't limit the maximum number/volume of policy actions per pass.
.TP
.B
\fB--dry-run\fP
Only report policy actions that would be performed without really doing them.
Note: Robinhood DB is impacted as if the reported actions were realy done.
.SH SCANNING OPTIONS

.TP
.B
\fB--no-gc\fP
Garbage collection of entries in DB is a long operation when terminating
a scan. This skips this operation if you don't care about removed
entries (or don't expect entries to be removed).
This is also recommended for partial scanning (see \fB-scan\fP=\fIdir\fP option).
.SH OUTPUT OPTIONS

.TP
.B
\fB--diff\fP=\fIattrset\fP
When scanning or reading changelogs, display changes for the given set of attributes (to stdout).
\fIattrset\fP is a list of values in: path,posix,stripe,all,notimes,noatime.
.SH BEHAVIOR OPTIONS

.TP
.B
\fB-O\fP, \fB--once\fP
Perform only one pass of the specified action and exit.
.TP
.B
\fB-d\fP, \fB--detach\fP
Daemonize the process (detach from parent process).
.SH CONFIG FILE OPTIONS

.TP
.B
\fB-f\fP \fIcfg_file\fP, \fB--config-file\fP=\fIcfg_file\fP
Path to configuration file (or short name).
.TP
.B
\fB-T\fP \fIoutput_file\fP, \fB--template\fP[=\fIoutput_file\fP]
Write a configuration file template to the specified file.
.TP
.B
\fB-D\fP, \fB--defaults\fP
Display default configuration values.
.TP
.B
\fB--test-syntax\fP
Check configuration file and exit.
.SH LOG OPTIONS

.TP
.B
\fB-L\fP \fIlogfile\fP, \fB--log-file\fP=\fIlogfile\fP
Force the path to the log file (overrides configuration value).
Special values "stdout" and "stderr" can be used.
.TP
.B
\fB-l\fP \fIloglevel\fP, \fB--log-level\fP=\fIloglevel\fP
Force the log verbosity level (overrides configuration value).
Allowed values: CRIT, MAJOR, EVENT, VERB, DEBUG, FULL.
.SH MISCELLANEOUS OPTIONS

.TP
.B
\fB-h\fP, \fB--help\fP
Display a short help about command line \fIoptions\fP.
.TP
.B
\fB-V\fP, \fB--version\fP
Display version info
.TP
.B
\fB-p\fP \fIpidfile\fP, \fB--pid-file\fP=\fIpidfile\fP
Pid file (used for service management).
.SH SEE ALSO
\fBrbh-lhsm-report\fP(1),\fBrbh-lhsm\fP-find(1),\fBrbh-lhsm\fP-du(1)
